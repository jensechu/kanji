{"version":3,"file":"kanji.js","sources":["../../src/waniKani.ts","../../src/kanji.ts"],"sourcesContent":["import { Kanji } from './kanji';\n\nexport namespace WaniKani {\n    type WaniKaniErrorResponse = {error: string, code: number};\n\n    export async function getKanji(apiKey: string) {\n        const level = await getLevel(apiKey);\n\n        const accumulatedKanji: Kanji.KanjiCategory = {};\n        let userLevels = '';\n        for (let currentLevel = level; currentLevel > 1; --currentLevel) {\n            accumulatedKanji[`Level ${currentLevel}`] = {};\n\n            userLevels += `${currentLevel},`;\n        }\n        accumulatedKanji['Level 1'] = {};\n        userLevels += '1';\n\n        let nextUrl: string | null = `https://api.wanikani.com/v2/subjects?levels=${userLevels}&types=kanji`;\n        while (nextUrl) {\n            const response: {\n                data: {\n                    data: {\n                        level: number,\n                        characters: string,\n                        meanings: {\n                            meaning: string,\n                            primary: boolean\n                        }[],\n                        readings: {\n                            type: 'onyomi' | 'kunyomi' | 'nanori',\n                            primary: boolean,\n                            reading: string\n                        }[],\n                    },\n                }[],\n                pages: {\n                    next_url: string | null,\n                },\n            } = await waniKaniRequest(apiKey, nextUrl);\n\n            for (const kanji of response.data) {\n                const kanjiInfo = kanji.data;\n\n                accumulatedKanji[`Level ${kanjiInfo.level}`][kanjiInfo.characters] = {\n                    meanings: kanjiInfo.meanings\n                        // ensure primary meanings come first\n                        .sort((a, b) => a.primary ? -1 : b.primary ? 1 : 0)\n                        .map(meaning => meaning.meaning),\n                    onyomiReadings: kanjiInfo.readings\n                        .filter(reading => reading.type == 'onyomi')\n                        // ensure primary readings come first\n                        .sort((a, b) => a.primary ? -1 : b.primary ? 1 : 0)\n                        .map(reading => reading.reading),\n                    kunyomiReadings: kanjiInfo.readings\n                        .filter(reading => reading.type == 'kunyomi')\n                        .sort((a, b) => a.primary ? -1 : b.primary ? 1 : 0)\n                        .map(reading => reading.reading),\n                };\n            }\n\n            nextUrl = response.pages.next_url;\n        }\n\n        return accumulatedKanji;\n    }\n\n    async function getLevel(apiKey: string): Promise<number> {\n        return (await waniKaniRequest(apiKey, 'https://api.wanikani.com/v2/user')).data.level;\n    }\n\n    async function waniKaniRequest(apiKey: string, url: string): Promise<any> {\n        const response = await fetch(url, {\n            headers: {\n                'Wanikani-Revision': '20170710',\n                'Authorization': `Bearer ${apiKey}`,\n            },\n        });\n\n        const responseJson = await response.json();\n        \n        if (response.status != 200)\n            throw new WaniKaniError(\n                (responseJson as WaniKaniErrorResponse).error,\n                (responseJson as WaniKaniErrorResponse).code,\n            );\n        else\n            return responseJson;\n    }\n\n    export class WaniKaniError extends Error {\n        code: number;\n\n        constructor(message: string, code: number) {\n            super(message);\n\n            this.code = code;\n        }\n    }\n}","import { WaniKani } from './waniKani';\n\nexport namespace Kanji {\n    export type KanjiCategory = {\n        [subcategoryName: string]: {\n            [kanji: string]: {\n                meanings: string[],\n                onyomiReadings: string[],\n                kunyomiReadings: string[],\n            },\n        },\n    };\n\n    export type KanjiData = {\n        category: string,\n        subcategory: string,\n        character: string,\n        meanings: string[],\n        onyomiReadings: string[],\n        kunyomiReadings: string[],\n    };\n\n    type KanjiId = number;\n    \n    const categories: {\n        [categoryName: string]: {\n            [subcategoryName: string]: {\n                // All of the kanji that should be deselected\n                // if  the user clicks the select all button\n                // a second time.\n                selectAllUndo: KanjiId[] | null,\n                // All of the kanji in this subcategory.\n                kanji: KanjiId[]\n            }\n        }\n    } = {};\n    // All kanji available, indexed by kanji ID.\n    const availableKanji: {[kanjiId: number]: KanjiData} = {};\n\n    // A counter that allows for the creation of unique IDs\n    //for all of the kanji.\n    let kanjiIdCounter = 0;\n\n    export async function init() {\n        // Add events to static categories\n        const staticCategories = document.getElementById('sidebar')!.querySelectorAll('.category');\n        for (const category of staticCategories) {\n            const categoryTitle = category.querySelector('.category-title')!;\n            const categoryContent = category.querySelector('.category-content')!;\n\n            categoryTitle.addEventListener('click', function() {\n                if (categoryContent.classList.contains('expand'))\n                    categoryContent.classList.remove('expand');\n                else\n                    categoryContent.classList.add('expand');\n            });\n        }\n\n        const jlptData: KanjiCategory = await (await fetch('data/JLPT.json')).json();\n\n        addKanjiCategory(\"JLPT\", jlptData);\n\n        // Accounts for the possibility that the inputs are\n        // set to non-default after a page reload.\n        setFont();\n        toggleGuideLines();\n    }\n\n    export function loadWaniKani() {\n        const apiKey = (document.getElementById('waniKaniKey')! as HTMLInputElement).value;\n\n        WaniKani.getKanji(apiKey)\n            .then(\n                kanji => addKanjiCategory('WaniKani', kanji),\n                err => {\n                    let errorMessage;\n\n                    if (err instanceof WaniKani.WaniKaniError)\n                        switch (err.code) {\n                            case 401:\n                                errorMessage = 'Error: Unauthorized (did you input your API key correctly?)';\n                                break;\n                            default:\n                                errorMessage = `WaniKani API Error: ${err.message} (code ${err.code})`;\n                                break;\n                        }\n                    else\n                        errorMessage = `Unexpected error: ${err.constructor.name}: ${err.message}`;\n\n                    alert(errorMessage);\n                },\n            );\n    }\n\n    export function setFont() { \n        const fontSelector = document.getElementById('fontSelector')! as HTMLSelectElement;\n\n        for (const kanjiBox of document.querySelectorAll('.kanji-box'))\n            (kanjiBox as HTMLElement).style.fontFamily = fontSelector.value;\n    }\n\n    export function toggleGuideLines() {\n        const content = document.getElementById('content')!;\n        if ((document.getElementById('guideLinesToggle')! as HTMLInputElement).checked) {\n            content.classList.add('guide-lines');\n        } else {\n            content.classList.remove('guide-lines');\n        }\n    }\n\n    function toggleKanji(kanjiId: KanjiId) {\n        if (kanjiSelected(kanjiId)) {\n            deselectKanji(kanjiId);\n        } else {\n            selectKanji(kanjiId);\n        }\n    }\n\n    function kanjiSelected(kanjiId: KanjiId): boolean {\n        return document.getElementById(`kanji/${kanjiId}`) != null;\n    }\n\n    function selectKanji(kanjiId: KanjiId) {\n        const kanjiData: {[key: string]: any} = Object.assign({}, availableKanji[kanjiId]!);\n        kanjiData.kanjiId = kanjiId;\n\n        document.getElementById('content')!.prepend(createKanjiRow(kanjiId));\n\n        document.getElementById(`kanji-button/${kanjiId}`)!.classList.add('selected');\n    }\n\n    function deselectKanji(kanjiId: KanjiId) {\n        document.getElementById(`kanji/${kanjiId}`)?.remove();\n\n        document.getElementById(`kanji-button/${kanjiId}`)!.classList.remove('selected');\n    }\n\n    function addKanjiCategory(categoryName: string, categoryData: KanjiCategory) {\n        categories[categoryName] = {};\n        const category = categories[categoryName];\n\n        for (const subcategoryName in categoryData) {\n            const subcategoryData = categoryData[subcategoryName];\n\n            categories[categoryName][subcategoryName] = {\n                selectAllUndo: null,\n                kanji: [],\n            };\n            const subcategory = categories[categoryName][subcategoryName];\n\n            for (const kanji in subcategoryData) {\n                const kanjiData = subcategoryData[kanji];\n                const kanjiId = kanjiIdCounter++;\n\n                availableKanji[kanjiId] = {\n                    category: categoryName,\n                    subcategory: subcategoryName,\n                    character: kanji,\n                    meanings: kanjiData.meanings,\n                    onyomiReadings: kanjiData.onyomiReadings,\n                    kunyomiReadings: kanjiData.kunyomiReadings,\n                };\n\n                subcategory.kanji.push(kanjiId);\n            }\n        }\n\n        document.getElementById('sidebar')!.appendChild(crateKanjiSelectionCategory(categoryName, category));\n    }\n\n    function createKanjiRow(kanjiId: KanjiId): HTMLDivElement {\n        const numHintKanjiBoxes = 6;\n        const numEmptyKanjiBoxes = 16;\n\n        const kanjiRow = document.createElement('div');\n\n        const kanjiData = availableKanji[kanjiId];\n\n        kanjiRow.classList.add('kanji-row');\n        kanjiRow.id = `kanji/${kanjiId}`;\n\n        const kanjiDescription = document.createElement('dl');\n        kanjiDescription.classList.add('kanji-description');\n        kanjiRow.appendChild(kanjiDescription);\n\n        const kanjiTermMeaning = document.createElement('dt');\n        kanjiTermMeaning.classList.add('kanji-term');\n        kanjiTermMeaning.innerText = 'Meaning:';\n        kanjiDescription.appendChild(kanjiTermMeaning);\n        const kanjiDefinitionMeaning = document.createElement('dd');\n        kanjiDefinitionMeaning.classList.add('kanji-definition');\n        kanjiDefinitionMeaning.innerText = kanjiData.meanings.join(', ');\n        kanjiDescription.appendChild(kanjiDefinitionMeaning);\n\n        const kanjiTermOnyomi = document.createElement('dt');\n        kanjiTermOnyomi.classList.add('kanji-term');\n        kanjiTermOnyomi.innerText = 'On Reading:';\n        kanjiDescription.appendChild(kanjiTermOnyomi);\n        const kanjiDefinitionOnyomi = document.createElement('dd');\n        kanjiDefinitionOnyomi.classList.add('kanji-definition');\n        kanjiDefinitionOnyomi.innerText = kanjiData.onyomiReadings.join('、');\n        kanjiDescription.appendChild(kanjiDefinitionOnyomi);\n\n        const kanjiTermKunyomi = document.createElement('dt');\n        kanjiTermKunyomi.classList.add('kanji-term');\n        kanjiTermKunyomi.innerText = 'Kun Reading:';\n        kanjiDescription.appendChild(kanjiTermKunyomi);\n        const kanjiDefinitionKunyomi = document.createElement('dd');\n        kanjiDefinitionKunyomi.classList.add('kanji-definition');\n        kanjiDefinitionKunyomi.innerText = kanjiData.kunyomiReadings.join('、');\n        kanjiDescription.appendChild(kanjiDefinitionKunyomi);\n\n        const kanjiVisuals = document.createElement('div');\n        kanjiVisuals.classList.add('kanji-visuals');\n        kanjiRow.appendChild(kanjiVisuals);\n\n        const kanjiStrokeOrder = document.createElement('div');\n        kanjiStrokeOrder.classList.add('kanji-stroke-order');\n        kanjiStrokeOrder.innerText = kanjiData.character;\n        kanjiVisuals.appendChild(kanjiStrokeOrder);\n\n        const kanjiBoxes = document.createElement('div');\n        kanjiVisuals.appendChild(kanjiBoxes);\n\n        for (let i = 0; i < numHintKanjiBoxes; ++i)\n            kanjiBoxes.appendChild(createKanjiBox(true, kanjiData.character));\n        for (let i = 0; i < numEmptyKanjiBoxes; ++i)\n            kanjiBoxes.appendChild(createKanjiBox(false));\n\n        return kanjiRow;\n    }\n\n    function createKanjiBox(hint: boolean, character?: string): HTMLDivElement {\n        const kanjiBox = document.createElement('div');\n        kanjiBox.classList.add('kanji-box');\n        if (hint)\n            kanjiBox.classList.add('kanji-hint-box');\n        kanjiBox.style.fontFamily = (document.getElementById('fontSelector')! as HTMLInputElement).value;\n        \n        const guideLines = document.createElement('img');\n        guideLines.src = 'resources/guide-lines.svg';\n        kanjiBox.appendChild(guideLines);\n        \n        if (character) {\n            const characterDiv = document.createElement('div');\n            characterDiv.innerText = character;\n            kanjiBox.appendChild(characterDiv);\n        }\n        \n        return kanjiBox;\n    }\n\n    function crateKanjiSelectionCategory(categoryName: string, category: {[subcategoryName: string]: {\n        selectAllUndo: number[] | null;\n        kanji: number[];\n    }}): HTMLDivElement {\n        const kanjiSelectionCategory = document.createElement('div');\n\n        kanjiSelectionCategory.classList.add('category');\n\n        const categoryTitle = document.createElement('h2');\n        categoryTitle.classList.add('category-title');\n        categoryTitle.innerText = categoryName;\n        kanjiSelectionCategory.appendChild(categoryTitle);\n\n        const categoryContent = document.createElement('div');\n        categoryContent.classList.add('category-content');\n        kanjiSelectionCategory.appendChild(categoryContent);\n\n        categoryTitle.addEventListener('click', function() {\n            if (categoryContent.classList.contains('expand'))\n                categoryContent.classList.remove('expand');\n            else\n                categoryContent.classList.add('expand');\n        });\n\n        for (const subcategoryName in category) {\n            const subcategory = category[subcategoryName];\n\n            categoryContent.appendChild(createKanjiSelectionSubcategory(subcategoryName, subcategory));\n        }\n\n        return kanjiSelectionCategory;\n    }\n\n    function createKanjiSelectionSubcategory(subcategoryName: string, subcategory: {\n        selectAllUndo: number[] | null;\n        kanji: number[];\n    }): HTMLDivElement {\n        const kanjiSelectionSubcategory = document.createElement('div');\n        kanjiSelectionSubcategory.classList.add('subcategory');\n            \n        const subcategoryHeader = document.createElement('div');\n        subcategoryHeader.classList.add('subcategory-header');\n        kanjiSelectionSubcategory.appendChild(subcategoryHeader);\n        \n        const subcategoryTitle = document.createElement('h3');\n        subcategoryTitle.classList.add('subcategory-title');\n        subcategoryTitle.innerText = subcategoryName;\n        subcategoryHeader.appendChild(subcategoryTitle);\n\n        // whitespace between title and select all\n        subcategoryHeader.appendChild(document.createTextNode(' '));\n\n        const selectAll = document.createElement('span');\n        selectAll.classList.add('select-all');\n        selectAll.innerText = '(select all)';\n        subcategoryHeader.appendChild(selectAll);\n\n        const subcategoryContent = document.createElement('div');\n        subcategoryContent.classList.add('subcategory-content');\n        kanjiSelectionSubcategory.appendChild(subcategoryContent);\n\n        for (const kanjiId of subcategory.kanji) {\n            subcategoryContent.appendChild(createKanjiSelectionButton(kanjiId));\n        }\n        \n        subcategoryTitle.addEventListener('click', function() {\n            if (subcategoryContent.classList.contains('expand'))\n                subcategoryContent.classList.remove('expand');\n            else\n                subcategoryContent.classList.add('expand');\n        });\n\n        selectAll.addEventListener('click', function() {\n            if (subcategory.selectAllUndo) {\n                for (const kanjiId of subcategory.selectAllUndo) {\n                    deselectKanji(kanjiId);\n                }\n\n                subcategory.selectAllUndo = null;\n            } else {\n                subcategory.selectAllUndo = [];\n\n                for (const kanjiId of subcategory.kanji) {\n                    if (!kanjiSelected(kanjiId)) {\n                        selectKanji(kanjiId);\n                        subcategory.selectAllUndo.push(kanjiId);\n                    }\n                }\n            }\n        });\n\n        return kanjiSelectionSubcategory;\n    }\n\n    function createKanjiSelectionButton(kanjiId: KanjiId): HTMLDivElement {\n        const kanjiSelectionButton = document.createElement('div');\n        kanjiSelectionButton.classList.add('kanji-button');\n        kanjiSelectionButton.innerText = availableKanji[kanjiId].character;\n        kanjiSelectionButton.id = `kanji-button/${kanjiId}`\n        kanjiSelectionButton.addEventListener('click', function() {\n            toggleKanji(kanjiId);\n        });\n        return kanjiSelectionButton;\n    }\n}\n\nKanji.init();"],"names":["Kanji"],"mappings":"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"}